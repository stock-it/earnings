{"version":3,"sources":["../src/ref.js"],"names":["isNewRef","prop","ownProperties","Object","keys","length","isCallbackRef","prototype","isPrototypeOf","call","Component","PureComponent","requiredRef","props","propName","componentName","propValue","TypeError","ref","rest","isRequired"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,MAAI,CAAC,+BAAcA,IAAd,CAAL,EAA0B;AACxB,WAAO,KAAP;AACD;;AACD,MAAMC,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYH,IAAZ,CAAtB;AACA,SAAOC,aAAa,CAACG,MAAd,KAAyB,CAAzB,IAA8BH,aAAa,CAAC,CAAD,CAAb,KAAqB,SAA1D;AACD;;AAED,SAASI,aAAT,CAAuBL,IAAvB,EAA6B;AAC3B,SAAO,OAAOA,IAAP,KAAgB,UAAhB,IACF,CAACE,MAAM,CAACI,SAAP,CAAiBC,aAAjB,CAA+BC,IAA/B,CAAoCC,gBAApC,EAA+CT,IAA/C,CADC,KAED,CAACU,oBAAD,IAAkB,CAACR,MAAM,CAACI,SAAP,CAAiBC,aAAjB,CAA+BC,IAA/B,CAAoCE,oBAApC,EAAmDV,IAAnD,CAFlB,KAGFA,IAAI,CAACI,MAAL,KAAgB,CAHrB;AAID;;AAED,SAASO,WAAT,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsCC,aAAtC,EAAqD;AACnD,MAAMC,SAAS,GAAGH,KAAK,CAACC,QAAD,CAAvB;;AAEA,MAAIR,aAAa,CAACU,SAAD,CAAb,IAA4BhB,QAAQ,CAACgB,SAAD,CAAxC,EAAqD;AACnD,WAAO,IAAP;AACD;;AAED,SAAO,IAAIC,SAAJ,WAAiBH,QAAjB,iBAAgCC,aAAhC,oBAAP;AACD;;AAED,SAASG,GAAT,CAAaL,KAAb,EAAoBC,QAApB,EAA8BC,aAA9B,EAAsD;AACpD,MAAMC,SAAS,GAAGH,KAAK,CAACC,QAAD,CAAvB;;AAEA,MAAIE,SAAS,IAAI,IAAjB,EAAuB;AACrB,WAAO,IAAP;AACD;;AALmD,oCAANG,IAAM;AAANA,IAAAA,IAAM;AAAA;;AAOpD,SAAOP,WAAW,MAAX,UAAYC,KAAZ,EAAmBC,QAAnB,EAA6BC,aAA7B,SAA+CI,IAA/C,EAAP;AACD;;AAEDD,GAAG,CAACE,UAAJ,GAAiBR,WAAjB;;eAEe;AAAA,SAAM,+BAAcM,GAAd,EAAmB,KAAnB,CAAN;AAAA,C","sourcesContent":["import { Component, PureComponent } from 'react';\nimport isPlainObject from './helpers/isPlainObject';\nimport wrapValidator from './helpers/wrapValidator';\n\nfunction isNewRef(prop) {\n  if (!isPlainObject(prop)) {\n    return false;\n  }\n  const ownProperties = Object.keys(prop);\n  return ownProperties.length === 1 && ownProperties[0] === 'current';\n}\n\nfunction isCallbackRef(prop) {\n  return typeof prop === 'function'\n    && !Object.prototype.isPrototypeOf.call(Component, prop)\n    && (!PureComponent || !Object.prototype.isPrototypeOf.call(PureComponent, prop))\n    && prop.length === 1;\n}\n\nfunction requiredRef(props, propName, componentName) {\n  const propValue = props[propName];\n\n  if (isCallbackRef(propValue) || isNewRef(propValue)) {\n    return null;\n  }\n\n  return new TypeError(`${propName} in ${componentName} must be a ref`);\n}\n\nfunction ref(props, propName, componentName, ...rest) {\n  const propValue = props[propName];\n\n  if (propValue == null) {\n    return null;\n  }\n\n  return requiredRef(props, propName, componentName, ...rest);\n}\n\nref.isRequired = requiredRef;\n\nexport default () => wrapValidator(ref, 'ref');\n"],"file":"ref.js"}